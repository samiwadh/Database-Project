
 
CREATE TABLE  "H_TRANSACTION" 
   (	"TRANSACTION_ID" NUMBER(9,0), 
	"TRANSACTION_NAME" VARCHAR2(40), 
	"CUSTOMER_ID" NUMBER(5,0), 
	"PAYMENT_ID" NUMBER(5,0), 
	"EMPLOYEE_ID" NUMBER(5,0), 
	"RESERVATION_ID" NUMBER(5,0), 
	"TRANSACTION_DATE" DATE, 
	 CONSTRAINT "H_TRANSACTION_PK" PRIMARY KEY ("TRANSACTION_ID") ENABLE
   ) ;ALTER TABLE  "H_TRANSACTION" ADD CONSTRAINT "H_TRANSACTION_CON" FOREIGN KEY ("PAYMENT_ID")
	  REFERENCES  "PAYMENTS" ("PAYMENT_ID") ENABLE;ALTER TABLE  "H_TRANSACTION" ADD CONSTRAINT "H_TRANSACTION_CON11" FOREIGN KEY ("CUSTOMER_ID")
	  REFERENCES  "CUSTOMER_INFORMATION" ("CUST_ID") ENABLE;ALTER TABLE  "H_TRANSACTION" ADD CONSTRAINT "H_TRANSACTION_CONA" FOREIGN KEY ("RESERVATION_ID")
	  REFERENCES  "H_RESERVATION" ("RESERVATION_ID") ENABLE;ALTER TABLE  "H_TRANSACTION" ADD CONSTRAINT "H_TRANSACTION_CONAA" FOREIGN KEY ("EMPLOYEE_ID")
	  REFERENCES  "H_EMPLOYEES" ("EMPLOYEE_ID") ENABLE;

CREATE OR REPLACE TRIGGER  "BI_H_TRANSACTION" 
  before insert on "H_TRANSACTION"               
  for each row  
begin   
  if :NEW."TRANSACTION_ID" is null then 
    select "H_TRANSACTION_SEQ".nextval into :NEW."TRANSACTION_ID" from dual; 
  end if; 
end; 

/
ALTER TRIGGER  "BI_H_TRANSACTION" ENABLE;

