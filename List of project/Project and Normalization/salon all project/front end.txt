BACK 
GO_BLOCK('LOGIN');
OPEN_FORM('C:\Users\HP\Desktop\LOGIN\fmx');

SEARCH

BEGIN 
	SET_BLOCK_PROPERTY('PERSONS',DEFAULT_WHERE,'PERSONS_ID,SERVICE_ID,CUSTOMER_ID,BRANCH_ID,EQU_ID,SERIAL_NO='||':SEARCH.SERACH_BOX');
	GO_BLOCK('PERSONS');
	EXECUTE_QUERY;
	SET_BLOCK_PROPERTY('PERSONS',DEFAULT_WHERE,'');
	END;






LOGIN 

declare
	un varchar2(20);
	pw varchar2(20);
	rol varchar(20);
begin
	select username,password,roles
	into un,pw,rol
	from USERS
	where username=:txtun and roles=:txtr;
			if :txtr='administrator' then
				 if un=:txtun then
					if pw=:txtpw then
						open_form('E:\my project\INDEX.fmx');
					else
						message('Incorrect password');
					end if;
				 else
					message('Incorrect username');
				 end if;
			else :txtr:='manager'; 
					if un=:txtun then
							if pw=:txtpw then
								open_form('E:\my project\INDEX.fmx');
							else
								message('Incorrect password');
							end if;
						 else
							message('Incorrect username');
						 end if;
	end if;
end;



login

go_block('LOGIN');
declare
 a varchar2(50);
 b varchar2(50);
begin 
	select user_id ,user_password into a,b from users
	where user_id = :login.user_id
	and user_password = :login.user_password;
	if sql%found 
		then 
		open_form('');
		else 
		message('the password is incorrect');
	end if ;
	end;









SIGN 
GO_BLOCK('SU');
SHOW_VIEW('SU_CAN');
HIDE_VIEW('LOGIN_CAN');
